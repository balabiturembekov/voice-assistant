# Voice Assistant "Liza" with Twilio

–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Liza —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏, GDPR —Å–æ–≥–ª–∞—Å–∏—è –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ Twilio –∏ Flask.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üó£Ô∏è **–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Liza** - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- üåç **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- üìã **GDPR —Å–æ–≥–ª–∞—Å–∏–µ** - –∑–∞–ø—Ä–æ—Å —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ DTMF (—Ü–∏—Ñ—Ä—ã 1/2)
- üì¶ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏** - –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞** - –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- üóÑÔ∏è **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤, —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd voice-assistant

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
# Twilio Credentials
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=your_twilio_phone_number_here

# Company Information
COMPANY_NAME=Your Company Name
WEBSITE_URL=https://your-website.com

# Voice Configuration
VOICE_NAME=alice  # –∏–ª–∏ polly.Joanna, polly.Emma –∏ –¥—Ä.

# Flask Configuration
FLASK_ENV=development
FLASK_DEBUG=True

# Database Configuration
DATABASE_URL=sqlite:///instance/voice_assistant.db
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python init_db.py
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
python app.py
```

## üìû –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Twilio

1. –í–æ–π–¥–∏—Ç–µ –≤ [Twilio Console](https://console.twilio.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Phone Numbers ‚Üí Manage ‚Üí Active numbers
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
4. –í —Ä–∞–∑–¥–µ–ª–µ "Voice" —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
   - **Webhook URL**: `https://your-domain.com/webhook/voice`
   - **HTTP Method**: POST

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
- Liza –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —è–∑—ã–∫–µ
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ "Liza, –≤–∞—à –≥–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç"

### 2. GDPR —Å–æ–≥–ª–∞—Å–∏–µ
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö
- **–ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç**: 1 (–î–∞) –∏–ª–∏ 2 (–ù–µ—Ç)
- –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ - –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∑–≤–æ–Ω–æ–∫

### 3. –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞
- –ü—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- **–ö–ª–∏–µ–Ω—Ç –≤–≤–æ–¥–∏—Ç**: –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç #
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞

### 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ (–∫–∞–∂–¥–∞—è —Ü–∏—Ñ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ)
- **–ö–ª–∏–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç**: 1 (–î–∞) –∏–ª–∏ 2 (–ù–µ—Ç)
- –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–∫–∞–∑ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

### 5. –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
- –°–æ–æ–±—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø–æ–º–æ—â—å

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- **üá©üá™ –ù–µ–º–µ—Ü–∫–∏–π** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤
- **üá∫üá∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π** - –¥–ª—è –Ω–æ–º–µ—Ä–æ–≤ –°–®–ê/–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏ (+1, +44)

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **Call** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–≤–æ–Ω–∫–µ (–Ω–æ–º–µ—Ä, —è–∑—ã–∫, —Å—Ç–∞—Ç—É—Å)
- **Conversation** - –¥–∏–∞–ª–æ–≥ —Å –∫–ª–∏–µ–Ω—Ç–æ–º (—à–∞–≥–∏, –æ—Ç–≤–µ—Ç—ã)
- **Order** - –∑–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ (–Ω–æ–º–µ—Ä, —Å—Ç–∞—Ç—É—Å, –∑–∞–º–µ—Ç–∫–∏)

### –°—Ç–∞—Ç—É—Å—ã –∑–≤–æ–Ω–∫–æ–≤

- **–í –æ–±—Ä–∞–±–æ—Ç–∫–µ** - –Ω–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ** - –ø–æ–ª—É—á–µ–Ω–æ —Å–æ–≥–ª–∞—Å–∏–µ
- **–ó–∞–≤–µ—Ä—à–µ–Ω** - –∑–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω
- **–ü—Ä–æ–±–ª–µ–º–∞** - –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- **`/`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **`/calls`** - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **`/calls/<id>`** - –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞
- **`/orders`** - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- **`/orders/<id>`** - –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞

### –§—É–Ω–∫—Ü–∏–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

- üìä **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** - –ø—Ä–æ—Å–º–æ—Ç—Ä –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- üîç **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ø–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ, –Ω–æ–º–µ—Ä—É
- ‚úèÔ∏è **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–≤–æ–Ω–∫–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üîß API Endpoints

### Webhook endpoints
- `POST /webhook/voice` - –í—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏
- `POST /webhook/consent` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è (DTMF)
- `POST /webhook/order` - –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞ (DTMF)
- `POST /webhook/order_confirm` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (DTMF)
- `POST /webhook/help` - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

### Web endpoints
- `GET /` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `GET /calls` - –°–ø–∏—Å–æ–∫ –∑–≤–æ–Ω–∫–æ–≤
- `GET /calls/<id>` - –î–µ—Ç–∞–ª–∏ –∑–≤–æ–Ω–∫–∞
- `GET /orders` - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- `GET /orders/<id>` - –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞

### API endpoints
- `POST /api/calls/<id>/status` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–≤–æ–Ω–∫–∞
- `POST /api/orders/<id>/status` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `GET /api/health` - API health check

## üéõÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ì–æ–ª–æ—Å–∞ Twilio

```python
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≥–æ–ª–æ—Å–∞
VOICE_NAME=alice
VOICE_NAME=man
VOICE_NAME=woman

# Amazon Polly –≥–æ–ª–æ—Å–∞ (–ø—Ä–µ–º–∏—É–º)
VOICE_NAME=polly.Joanna
VOICE_NAME=polly.Emma
VOICE_NAME=polly.Amy
VOICE_NAME=polly.Kimberly
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–∞–Ω–∏–∏

```python
COMPANY_NAME=Your Company Name
WEBSITE_URL=https://your-website.com
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
python app.py
```

### –ü—Ä–æ–¥–∞–∫—à–Ω —Å Gunicorn

```bash
gunicorn -w 4 -b 0.0.0.0:5000 app:app
```

### Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t voice-assistant .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 5000:5000 voice-assistant
```

### Docker Compose

```bash
# With Nginx (recommended for production)
docker-compose up -d

# Or use the convenience script
./start-with-nginx.sh
```

### Docker Compose Services

- **voice-assistant** - Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **nginx** - Reverse proxy –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- **voice-assistant-network** - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å Docker

### Nginx Configuration

Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ reverse proxy —Å:

- **Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫
- **Static Files** - –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ CSS/JS —Ñ–∞–π–ª–æ–≤
- **Security Headers** - –∑–∞—â–∏—Ç–∞ –æ—Ç XSS –∏ –¥—Ä—É–≥–∏—Ö –∞—Ç–∞–∫
- **Gzip Compression** - —Å–∂–∞—Ç–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- **Health Checks** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### –ü–æ—Ä—Ç—ã:
- **80** - HTTP (–æ—Å–Ω–æ–≤–Ω–æ–π)
- **443** - HTTPS (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- **5000** - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Flask (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ –∑–≤–æ–Ω–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å—ã –∑–≤–æ–Ω–∫–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–≥–ª–∞—Å–∏–π/–æ—Ç–∫–∞–∑–æ–≤
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **HTTPS** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **GDPR** - –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞—É–¥–∏—Ç –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
voice-assistant/
‚îú‚îÄ‚îÄ app.py                 # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ models.py             # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ init_db.py            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ migrate_db.py         # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ view_calls.py         # –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–≤–æ–Ω–∫–æ–≤
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ templates/            # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îú‚îÄ‚îÄ calls.html
‚îÇ   ‚îú‚îÄ‚îÄ orders.html
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ static/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îú‚îÄ‚îÄ css/
    ‚îî‚îÄ‚îÄ js/
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π webhook endpoint –≤ `app.py`
2. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π TwiML response
3. –û–±–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –î–æ–±–∞–≤—å—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ `templates/`

## üìû –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
python app.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook
curl -X POST http://localhost:5000/webhook/voice \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "From=%2B4973929378420&CallSid=test_call"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ngrok

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok
npm install -g ngrok

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å
ngrok http 5000

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL ngrok –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Twilio
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose:**
   ```bash
   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
   sudo apt update && sudo apt upgrade -y
   
   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
   curl -fsSL https://get.docker.com -o get-docker.sh
   sudo sh get-docker.sh
   sudo usermod -aG docker $USER
   
   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
   sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
   sudo chmod +x /usr/local/bin/docker-compose
   ```

2. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
   ```bash
   git clone <your-repo-url> /opt/voice-assistant
   cd /opt/voice-assistant
   
   # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
   cp env.example .env
   nano .env
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Nginx:**
   ```bash
   sudo ./setup-nginx.sh
   ```

4. **–ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:**
   ```bash
   sudo certbot --nginx -d lisa.automatonsoft.de
   ```

5. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   ./deploy.sh
   ```

6. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:**
   ```bash
   sudo cp voice-assistant.service /etc/systemd/system/
   sudo systemctl enable voice-assistant.service
   sudo systemctl start voice-assistant.service
   ```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí –û—Å–Ω–æ–≤–Ω–æ–π Nginx (443/80) ‚Üí –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π Nginx (8080) ‚Üí Flask App (5000)
```

- **–û—Å–Ω–æ–≤–Ω–æ–π Nginx** - SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è, –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–æ—Ä—Ç 8080
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π Nginx** - reverse proxy –¥–ª—è Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Flask App** - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f voice-assistant

# –õ–æ–≥–∏ Nginx
docker-compose logs -f nginx

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
sudo journalctl -u voice-assistant.service -f
```

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Twilio
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤**